<header id="main_header" class="bg-white shadow-soft border-b border-neutral-200 sticky top-0 z-50 w-full" data-controller="mobile-menu">
  <div class="w-full px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Logo only -->
      <div class="flex-shrink-0">
        <%= link_to root_path, class: "flex items-center" do %>
        <!-- Logo image -->
        <%= image_tag "logo.webp", 
            class: "w-12 h-12 object-contain", 
            alt: "Malvern Ballet School Logo" %>
        <% end %>
      </div>

      <!-- Elegant wavy separator line -->
      <div class="flex-1 flex justify-center">
        <svg class="w-full h-8 text-primary-400 opacity-40" fill="none" viewBox="0 0 100 32" preserveAspectRatio="none">
          <defs>
            <linearGradient id="wavyGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:transparent;stop-opacity:0" />
              <stop offset="20%" style="stop-color:#a855f7;stop-opacity:0.5" />
              <stop offset="50%" style="stop-color:#22c55e;stop-opacity:0.6" />
              <stop offset="80%" style="stop-color:#a855f7;stop-opacity:0.5" />
              <stop offset="100%" style="stop-color:transparent;stop-opacity:0" />
            </linearGradient>
          </defs>
          <path d="M0 16 Q10 8 20 16 Q30 24 40 16 Q50 8 60 16 Q70 24 80 16 Q90 8 100 16" stroke="url(#wavyGradient)" stroke-width="1.5" fill="none" />
        </svg>
      </div>

      <!-- Desktop navigation -->
      <nav class="hidden md:flex space-x-8">
        <% navigation_items.each do |item| %>
        <% if item[:method] == :delete %>
        <%= link_to item[:path], 
              data: { "turbo-method": :delete },
              class: "text-neutral-700 hover:text-primary-500 px-3 py-2 text-sm font-medium transition-colors duration-200 #{item[:active] ? 'text-primary-500 border-b-2 border-primary-500' : ''}" do %>
        <%= item[:title] %>
        <% end %>
        <% elsif item[:external] %>
        <%= link_to item[:path], 
              target: "_blank",
              rel: "noopener noreferrer",
              class: "text-neutral-700 hover:text-primary-500 px-3 py-2 text-sm font-medium transition-colors duration-200 #{item[:active] ? 'text-primary-500 border-b-2 border-primary-500' : ''}" do %>
        <%= item[:title] %>
        <% end %>
        <% else %>
        <%= link_to item[:path], 
              class: "text-neutral-700 hover:text-primary-500 px-3 py-2 text-sm font-medium transition-colors duration-200 #{item[:active] ? 'text-primary-500 border-b-2 border-primary-500' : ''}" do %>
        <%= item[:title] %>
        <% end %>
        <% end %>
        <% end %>

        <!-- Development-only Design System link -->
        <% if Rails.env.development? %>
        <%= link_to "Design System", design_system_path, 
                class: "text-neutral-700 hover:text-primary-500 px-3 py-2 text-sm font-medium transition-colors duration-200" %>
        <% end %>
      </nav>

      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button type="button" class="text-neutral-700 hover:text-primary-500 p-2 rounded-md" data-action="click->mobile-menu#toggle">
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile navigation menu -->
  <div class="md:hidden hidden" data-mobile-menu-target="menu">
    <div class="px-2 pt-2 pb-3 space-y-1 bg-white border-t border-neutral-200">
      <% navigation_items.each do |item| %>
      <% if item[:method] == :delete %>
      <%= link_to item[:path], 
            data: { "turbo-method": :delete },
            class: "block px-3 py-2 text-base font-medium text-neutral-700 hover:text-primary-500 hover:bg-primary-50 rounded-md #{item[:active] ? 'text-primary-500 bg-primary-50' : ''}" do %>
      <%= item[:title] %>
      <% end %>
      <% elsif item[:external] %>
      <%= link_to item[:path], 
            target: "_blank",
            rel: "noopener noreferrer",
            class: "block px-3 py-2 text-base font-medium text-neutral-700 hover:text-primary-500 hover:bg-primary-50 rounded-md #{item[:active] ? 'text-primary-500 bg-primary-50' : ''}" do %>
      <%= item[:title] %>
      <% end %>
      <% else %>
      <%= link_to item[:path], 
            class: "block px-3 py-2 text-base font-medium text-neutral-700 hover:text-primary-500 hover:bg-primary-50 rounded-md #{item[:active] ? 'text-primary-500 bg-primary-50' : ''}" do %>
      <%= item[:title] %>
      <% end %>
      <% end %>
      <% end %>

      <!-- Development-only Design System link for mobile -->
      <% if Rails.env.development? %>
      <%= link_to "Design System", design_system_path, 
              class: "block px-3 py-2 text-base font-medium text-neutral-700 hover:text-primary-500 hover:bg-primary-50 rounded-md" %>
      <% end %>
    </div>
  </div>
</header>